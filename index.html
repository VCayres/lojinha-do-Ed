<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="theme-color" content="#00b4d8"/>
  <title>Vendinha do Fisco</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.json"/>

  <link rel="stylesheet" href="./style.css"/>
</head>
<body>
  <header class="header">
    <h1>Vendinha do Fisco</h1>
    <p>Simulador educacional com emiss√£o de nota fiscal (sem validade fiscal).</p>
  </header>

  <main class="app">
    <section class="products" id="products"></section>

    <!-- Carrinho lateral (desktop) -->
    <aside class="cart-section" id="cart-desktop">
      <h2>Carrinho</h2>
      <ul class="cart-items" id="cart-items"></ul>
      <div class="cart-total">
        <span>Total:</span>
        <span id="cart-total">R$ 0,00</span>
      </div>
      <button id="checkout-btn" class="checkout-btn" disabled>Gerar Nota Fiscal</button>
    </aside>
  </main>

  <!-- Barra fixa do carrinho (mobile) -->
  <div class="mobile-cart-bar" id="mobile-cart-bar">
    <button class="mobile-cart-open" id="mobile-cart-open" aria-label="Abrir carrinho">
      üõí <span id="mobile-cart-count">0</span>
    </button>
    <div class="mobile-cart-total">
      Total: <strong id="mobile-cart-total">R$ 0,00</strong>
    </div>
    <button class="mobile-cart-checkout" id="mobile-checkout-btn" disabled>Nota</button>
  </div>

  <!-- Drawer/modal do carrinho (mobile) -->
  <div class="drawer-backdrop" id="drawer-backdrop" hidden></div>
  <aside class="drawer" id="drawer" aria-hidden="true">
    <header class="drawer-header">
      <h3>Carrinho</h3>
      <button id="drawer-close" aria-label="Fechar">‚úï</button>
    </header>
    <ul class="cart-items" id="cart-items-mobile"></ul>
    <div class="drawer-total">
      <span>Total:</span>
      <strong id="drawer-total">R$ 0,00</strong>
    </div>
    <button id="drawer-checkout" class="checkout-btn" disabled>Gerar Nota Fiscal</button>
  </aside>

  <!-- Nota Fiscal (modal) -->
  <div class="receipt-backdrop" id="receipt-backdrop" hidden></div>
  <div class="receipt-modal" id="receipt-modal" role="dialog" aria-modal="true" hidden>
    <div class="receipt-paper">
      <header class="nf-header">
        <div>
          <h2>NOTA FISCAL (SIMULADA)</h2>
          <p><strong>Emitente:</strong> Vendinha do Fisco LTDA (FICT√çCIO)</p>
          <p><strong>CNPJ:</strong> 00.000.000/0000-00 ‚Ä¢ <strong>IE:</strong> ISENTO</p>
          <p><strong>Endere√ßo:</strong> Rua da Educa√ß√£o, 123 ‚Äî Curitiba/PR</p>
        </div>
        <img class="nf-qr" id="nf-qr" alt="QR Code - Educa√ß√£o Fiscal PR"/>
      </header>

      <div class="nf-meta">
        <p><strong>N¬∫:</strong> <span id="nf-numero"></span> ‚Ä¢ <strong>S√©rie:</strong> 1</p>
        <p><strong>Data/Hora:</strong> <span id="nf-data"></span></p>
        <p><strong>Destinat√°rio:</strong> Consumidor Final</p>
      </div>

      <table class="nf-table">
        <thead>
          <tr>
            <th>Produto</th>
            <th>Qtd</th>
            <th>Vlr Unit</th>
            <th>Impostos</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody id="nf-itens"></tbody>
      </table>

      <div class="nf-totais">
        <p><span>Base de C√°lculo:</span> <strong id="nf-base"></strong></p>
        <p><span>Total de Impostos:</span> <strong id="nf-impostos"></strong></p>
        <p><span>Total da Nota:</span> <strong id="nf-total"></strong></p>
      </div>

      <p class="nf-aviso">Documento emitido por simulador educacional. N√£o possui validade fiscal.</p>

      <div class="nf-acoes">
        <button id="nf-print" class="print-btn">Imprimir</button>
        <button id="nf-close" class="close-btn">Fechar</button>
      </div>
    </div>
  </div>

  <script src="./script.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js').catch(()=>{});
      });
    }
  </script>
</body>
</html>

